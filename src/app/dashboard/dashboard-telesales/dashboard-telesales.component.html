<section class="dashboard-info">
  <h1 class="welcome-section">
    مرحباً بك <span>{{ userInfo.name || "المستخدم" }}</span> في لوحة تحكم -
    TeleSalse
  </h1>
  <!-- count card -->
  <app-count-card [stats]="stats"></app-count-card>
  <!-- search and dropdown -->
  <div class="search-container border-gradient">
    <app-search-input
      [placeholder]="searchPlaceholder"
      (search)="onSearch($event)"
    ></app-search-input>
    <div class="dropdown-container">
      <app-dropdown
        label="اختر الحالة"
        [options]="listLeadStatus"
        [selectedOption]="selectedLeadStatusName"
        (optionSelected)="onOptionSelected($event)"
      ></app-dropdown>
      <app-dropdown
        label="اختر الدولة"
        [options]="countryNames"
        [selectedOption]="selectedCountry"
        (optionSelected)="onCountrySelected($event)"
      ></app-dropdown>
      <app-dropdown
        [label]="cityDropdownLabel"
        [options]="cityNames"
        [selectedOption]="selectedCity"
        [disabled]="!selectedCountry"
        (optionSelected)="onCitySelected($event)"
      ></app-dropdown>
      <app-dropdown
        label="تاريخ الإجراء"
        [options]="actionDateFilterLabels"
        (optionSelected)="onActionDateFilterSelected($event)"
      ></app-dropdown>
    </div>
  </div>
  <!-- table -->
  <div class="table-container">
    <app-table
      *ngIf="!loadingLeads && !isSearching"
      [data]="leadsList"
      [columns]="columns"
      [pageSize]="pageSize"
      [currentPage]="currentPage"
      [totalCount]="totalCount"
      [showDataTable]="true"
      [hasNoData]="leadsList.length === 0"
      [showIndex]="true"
      [showView]="true"
      [showAdd]="true"
      [showEdit]="false"
      [showDelete]="false"
      [showChat]="false"
      [showEmail]="true"
      [showCall]="true"
      [showNote]="true"
      [showMeeting]="true"
      [showFollowUp]="true"
      [actionLabels]="actionLabels"
      [leadStatusOptions]="leadStatusOptions"
      [leadStatusColorMap]="leadStatusColorMap"
      [alwaysEditLeadStatus]="true"
      [actionDisplayMode]="actionDisplayMode"
      (pageChange)="onPageChange($event)"
      (pageSizeChange)="onPageSizeChange($event)"
      (view)="onView($event)"
      (addButtonClick)="onAddButtonClick($event)"
      (edit)="onEdit($event)"
      (note)="onNote($event)"
      (call)="onCall($event)"
      (email)="onEmail($event)"
      (meeting)="onMeeting($event)"
      (followUp)="onFollowUp($event)"
      (leadStatusClick)="onEdit($event)"
      (statusChange)="onStatusChange($event.row, $event.status)"
      (saveLeadStatus)="saveLeadStatus($event)"
      (cancelLeadStatus)="cancelLeadStatus($event)"
    ></app-table>
  </div>

  <!--------------------------- Notifications and Recent Interactions ----------------------->
  <div class="notifications-interactions-container">
    <!-- Recent Interactions Panel -->
    <app-recent-interactions
      [recentInteractions]="recentInteractions"
      [loadingRecentInteractions]="loadingRecentInteractions"
    >
    </app-recent-interactions>

    <!-- notifications panel -->
    <app-notification-card
      [notifications]="notifications"
      [loadingNotifications]="loadingNotifications"
    >
    </app-notification-card>
  </div>
</section>
